# Claude コマンド: コミット

このコマンドは、規約的なコミットメッセージと絵文字を使用して、整理されたコミットを作成するのに役立ちます。

## 使用方法

コミットを作成するには、以下のように入力します：
```
/commit
```

オプション付きで使用する場合：
```
/commit --no-verify
```

## このコマンドの動作

1. `--no-verify`が指定されない限り、自動的にプリコミットチェックを実行：
   - `pnpm lint` コード品質の確保
   - `pnpm build` ビルドの成功確認
   - `pnpm generate:docs` ドキュメントの更新
2. `git status`でステージされたファイルをチェック
3. ステージされたファイルが0個の場合、`git add`で変更・新規ファイルを自動追加
4. `git diff`でコミットされる変更を理解
5. 複数の異なる論理的変更が含まれているかを分析
6. 複数の異なる変更が検出された場合、複数の小さなコミットに分割することを提案
7. 各コミット（または分割されない場合は単一のコミット）に対して、絵文字規約コミット形式でコミットメッセージを作成

## コミットのベストプラクティス

- **コミット前の確認**: コードがリント済み、正しくビルドされ、ドキュメントが更新されていることを確認
- **アトミックコミット**: 各コミットは単一の目的を果たす関連する変更のみを含む
- **大きな変更の分割**: 複数の関心事に触れる変更は、別々のコミットに分割
- **規約的コミット形式**: `<type>: <description>`の形式を使用。typeは以下のいずれか：
  - `feat`: 新機能
  - `fix`: バグ修正
  - `docs`: ドキュメント変更
  - `style`: コードスタイル変更（フォーマットなど）
  - `refactor`: バグ修正や機能追加でないコード変更
  - `perf`: パフォーマンス向上
  - `test`: テストの追加または修正
  - `chore`: ビルドプロセス、ツールなどの変更
- **現在形、命令形**: コミットメッセージは命令として記述（例：「機能を追加」ではなく「機能を追加する」）
- **簡潔な1行目**: 最初の行は72文字以下に保つ
- **日本語メッセージ**: コミットメッセージは日本語で記述する
- **絵文字**: 各コミットタイプに適切な絵文字を組み合わせ：
  - ✨ `feat`: 新機能
  - 🐛 `fix`: バグ修正
  - 📝 `docs`: ドキュメント
  - 💄 `style`: フォーマット/スタイル
  - ♻️ `refactor`: コードリファクタリング
  - ⚡️ `perf`: パフォーマンス向上
  - ✅ `test`: テスト
  - 🔧 `chore`: ツール、設定
  - 🚀 `ci`: CI/CD改善
  - 🗑️ `revert`: 変更の取り消し
  - 🧪 `test`: 失敗するテストの追加
  - 🚨 `fix`: コンパイラ/リンターの警告修正
  - 🔒️ `fix`: セキュリティ問題の修正
  - 👥 `chore`: 貢献者の追加または更新
  - 🚚 `refactor`: リソースの移動または名前変更
  - 🏗️ `refactor`: アーキテクチャの変更
  - 🔀 `chore`: ブランチのマージ
  - 📦️ `chore`: コンパイル済みファイルまたはパッケージの追加/更新
  - ➕ `chore`: 依存関係の追加
  - ➖ `chore`: 依存関係の削除
  - 🌱 `chore`: シードファイルの追加または更新
  - 🧑‍💻 `chore`: 開発者体験の向上
  - 🧵 `feat`: マルチスレッドまたは並行性に関連するコードの追加/更新
  - 🔍️ `feat`: SEOの改善
  - 🏷️ `feat`: 型の追加または更新
  - 💬 `feat`: テキストとリテラルの追加または更新
  - 🌐 `feat`: 国際化とローカライゼーション
  - 👔 `feat`: ビジネスロジックの追加または更新
  - 📱 `feat`: レスポンシブデザインの作業
  - 🚸 `feat`: ユーザーエクスペリエンス/ユーザビリティの向上
  - 🩹 `fix`: 重要でない問題の簡単な修正
  - 🥅 `fix`: エラーのキャッチ
  - 👽️ `fix`: 外部APIの変更によるコード更新
  - 🔥 `fix`: コードまたはファイルの削除
  - 🎨 `style`: コードの構造/フォーマットの改善
  - 🚑️ `fix`: 重要なホットフィックス
  - 🎉 `chore`: プロジェクトの開始
  - 🔖 `chore`: リリース/バージョンタグ
  - 🚧 `wip`: 作業中
  - 💚 `fix`: CIビルドの修正
  - 📌 `chore`: 依存関係を特定のバージョンに固定
  - 👷 `ci`: CIビルドシステムの追加または更新
  - 📈 `feat`: 分析またはトラッキングコードの追加/更新
  - ✏️ `fix`: タイポの修正
  - ⏪️ `revert`: 変更の取り消し
  - 📄 `chore`: ライセンスの追加または更新
  - 💥 `feat`: 破壊的変更の導入
  - 🍱 `assets`: アセットの追加または更新
  - ♿️ `feat`: アクセシビリティの向上
  - 💡 `docs`: ソースコードのコメント追加/更新
  - 🗃️ `db`: データベース関連の変更
  - 🔊 `feat`: ログの追加または更新
  - 🔇 `fix`: ログの削除
  - 🤡 `test`: モックの作成
  - 🥚 `feat`: イースターエッグの追加または更新
  - 🙈 `chore`: .gitignoreファイルの追加または更新
  - 📸 `test`: スナップショットの追加または更新
  - ⚗️ `experiment`: 実験の実行
  - 🚩 `feat`: フィーチャーフラグの追加、更新、削除
  - 💫 `ui`: アニメーションとトランジションの追加/更新
  - ⚰️ `refactor`: デッドコードの削除
  - 🦺 `feat`: バリデーション関連コードの追加/更新
  - ✈️ `feat`: オフラインサポートの改善

## コミット分割のガイドライン

diffを分析する際、以下の基準に基づいてコミットの分割を検討してください：

1. **異なる関心事**: コードベースの無関係な部分への変更
2. **異なる変更の種類**: 機能、修正、リファクタリングなどの混在
3. **ファイルパターン**: 異なる種類のファイルへの変更（例：ソースコード対ドキュメント）
4. **論理的グループ化**: 別々に理解またはレビューしやすい変更
5. **サイズ**: 分割した方が明確になる非常に大きな変更

## 例

良いコミットメッセージの例：
- ✨ feat: ユーザー認証システムを追加
- 🐛 fix: レンダリングプロセスのメモリリークを解決
- 📝 docs: 新しいエンドポイントでAPIドキュメントを更新
- ♻️ refactor: パーサーのエラーハンドリングロジックを簡素化
- 🚨 fix: コンポーネントファイルのリンター警告を解決
- 🧑‍💻 chore: 開発者ツールのセットアップ処理を改善
- 👔 feat: 取引検証のビジネスロジックを実装
- 🩹 fix: ヘッダーの軽微なスタイルの不整合を修正
- 🚑️ fix: 認証フローの重要なセキュリティ脆弱性を修正
- 🎨 style: 読みやすさを向上させるコンポーネント構造を再編成
- 🔥 fix: 廃止されたレガシーコードを削除
- 🦺 feat: ユーザー登録フォームの入力検証を追加
- 💚 fix: 失敗したCIパイプラインテストを解決
- 📈 feat: ユーザーエンゲージメントの分析トラッキングを実装
- 🔒️ fix: 認証パスワード要件を強化
- ♿️ feat: スクリーンリーダーのフォームアクセシビリティを改善

陸上競技システム固有の例：
- ✨ feat: 競技結果入力フォームを追加
- 🐛 fix: 記録計算でのタイム表示エラーを修正
- 📝 docs: 大会管理APIのドキュメントを更新
- ♻️ refactor: 選手データ取得処理をリファクタリング
- 🗃️ db: 競技結果テーブルにフィールド試技カラムを追加
- 🚨 fix: 競技種目選択でのバリデーションエラーを修正
- 🎨 style: 大会一覧画面のレイアウトを改善
- 🔧 chore: PostgreSQLスキーマファイルを更新

コミット分割の例：
- 最初のコミット: ✨ feat: 新しい競技種目の型定義を追加
- 2番目のコミット: 📝 docs: 新しい競技種目のドキュメントを更新
- 3番目のコミット: 🔧 chore: package.jsonの依存関係を更新
- 4番目のコミット: 🏷️ feat: 新しいAPIエンドポイントの型定義を追加
- 5番目のコミット: 🗃️ db: 競技結果テーブルの構造を改善
- 6番目のコミット: 🚨 fix: 新しいコードのリンティング問題を解決
- 7番目のコミット: ✅ test: 新しい競技種目機能のユニットテストを追加
- 8番目のコミット: 🔒️ fix: セキュリティ脆弱性のある依存関係を更新

## コマンドオプション

- `--no-verify`: プリコミットチェック（lint、build、generate:docs）をスキップ

## 重要な注意事項

- デフォルトでは、コード品質を確保するためにプリコミットチェック（`pnpm lint`、`pnpm build`、`pnpm generate:docs`）が実行されます
- これらのチェックが失敗した場合、コミットを続行するか、まず問題を修正するかを尋ねられます
- 特定のファイルが既にステージされている場合、コマンドはそれらのファイルのみをコミットします
- ファイルがステージされていない場合、変更および新規ファイルをすべて自動的にステージします
- コミットメッセージは検出された変更に基づいて構成されます
- コミット前に、複数のコミットがより適切かどうかを識別するためにdiffをレビューします
- 複数のコミットを提案する場合、変更を別々にステージしてコミットするのを支援します
- コミットdiffを常にレビューして、メッセージが変更と一致することを確認します
